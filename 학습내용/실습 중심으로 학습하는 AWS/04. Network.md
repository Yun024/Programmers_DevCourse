# Network
## Route53
가용성과 확장성이 뛰어난 DNS(도메인 이름 시스템)웹 서비스 <br>
세 가지 주요 기능, 즉 도메인 등록, DNS 라우팅, 상태 확인을 조합하여 실행할 수 있음
- Public host zone과 private host zone이 조재
- DNS(네임서버) + 모니터링 + L4 + GSLB
- 도메인을 등록하기 위해 도메인을 구매해야 함
    + 내부: AWS 도메인 검색 (연 단위 비용 지불)
    + 외부: 호스팅 영역 생성(네임서버 이름 변경), technara.com
        - 레코드 생성: admin.technara.com 엔드 포인트 선택 
        - 서브 도메인 등록: www, dev, api, 삭제할 경우 먼저 삭제

## Certification Manager
- AWS 서비스 및 연결된 내부 리소스에 사용할 공인 및 사설 SSL/TLS 인증서를 프로비저닝, 관리 및 배포
- SSL/TLS 인증서를 구매, 업로드 및 갱신하는데 드는 시간 소모적인 수동 프로세스를 대신 처리함

1. 사용할 TLS/SSL 인증서를 AWS계정으로 요청하거나 가져온다
2. 도메인 이름 시스템(DNS) 또는 이메일 검증
    - 요청된 인증서의 도메인 소유권을 검증하여 인증서 발급을 완료
3. 다양한 AWS 서비스에서 새로 발급되거나 가져온 인증서를 사용함
    - Elastic Load Balancing(ELB), Amazon CloudFront 

### Certification Manager 특징
1. ACM 통합 서비스를 위한 무료 퍼블릭 인증서
2. 관리형 인증서 갱신
3. 손쉽게 인증서 받기

### SSL 인증서
- 공개 키와 개인 키라는 키 쌍을 갖고 있다.
- 위 키들이 함께 작용하여 암호화된 연결을 수립
- 인증서는 또한 "주체(subject)"라는 것을 포함하고 이는 인증서/웹사이트 소유자의 ID이다
- 인증서를 얻으려면 서버에서 인증서 서명 요청(CSR)을 생성해야 한다.
- 이 과정에서 서버에 개인 키와 공개 키 생성
- SSL 인증서 발급자(인증 기관 또는 CA)에게 보내는 CSR 데이터 파일에는 공개 키가 포함됨

### ACM 인증서 
- 구매한 도메인 이름 및 서브 도메인(*) 입력
- 검증 방법: DNS검증 
- 적용: `cloudfront` `ELB`에서 SSL인증서 선택  `HTTP -> HTTPS`
- 외부 인증서는 **가져오기**를 통해서

## CloudFront
뛰어난 성능, 보안 및 개발자 편의를 위해 구축된 콘텐츠 전송 네트워크(CDN) 서비스 <br>

### CDN
1. CDN은 데이터 사용량이 많은 애플리케이션의 웹 페이지 로드 속도를 높이는 상호 연결된 서버 네트워크
2. 정적 콘텐츠 & 동적 콘텐츠
3. 캐싱/ 동적 가속/ 엣지 로직 계산

### CloudFront 특징
1. 대기 시간 감소
2. 보안 향상
3. 비용 절감
4. 사용자 정의 전송

### Cloudfront 생성
1. CDN서비스를 받기 위한 서비스의 원본 도메인 선택 
2. 기본 캐시 동작 - 뷰어 프로토콜 정책
3. WAF - 특정 IP는 접속 못하게 함
4. 설정 - 라우트53 대체 도메인 선택, SSL 인증서 선택
- CDN은 글로벌 서비스이기 때문에 해당하는 리전에서 SSL 인증서를 받아야 함

※ SSL인증서, 도메인, 프론트, 백엔드 작업이 끝난 후 CDN서비스를 작업하는게 좋음 

## ELB

> 로드 밸런싱: 애플리케이션을 지원하는 리소스 풀 전체에 네트워크 트래픽을 균등하게 배포하는 방법

> 로드 밸런서: 서버에 가해지는 부하(로드)를 분산(밸런싱)해주는 장치 또는 기술을 통칭한다

### ELB 대상그룹
1. 대상 그룹에 대상을 등록함
2. 대상 그룹에 대해 지정한 프로토콜과 포트 번호를 사용하여 등록된 대상으로 요청을 전송함
3. 대상 그룹에 각 대상을 등록할 때 이 포트를 재정의할 수 있음

### ELB 생성
- AWS EC2 로드밸런싱
- 이미 만들어진 인스턴스를 대상 그룹으로 지정 
- 고정IP할당할 때는 Network LoadBalancer
- 인증서 셋팅, 특정 트래픽을 부하 분산 하기 위해서 사용
- 클라우드가 아닌 기존 인프라에서도 장애 대응과 가용성을 높이기 위해 사용

## VPC
- 사용자가 정의한 가상 네트워크로 AWS 리소스를 시작할 수 있음
- Amazon Virtual Private Cloud(Amazon VPC)는 AWS의 확장 가능한 인프라를 사용한다는 이점
    + 고객의 자체 데이터 센터에서 운영하는 기존 네트워크와 유사함
    + VPC를 생성한 후 서브넷을 추가할 수 있음(프라이빗, 퍼블릭 모두 가능)
        - 퍼블릭 - 인터넷 게이트웨이(igw), 프라이빗 - NAT게이트웨이(nat)
        - NAT게이트웨이는 보통 탄력적IP(고정IP) 셋팅

### VPC기능
- 서브넷
    + VPC의 IP 주소 범위
    + 단일 가용 영역에 상주해야 함
    + 서브넷을 추가한 후에는 VPC에서 AWS 리소스 배포할 수 있음

- IP 주소 지정
    + VPC와 서브넷에 IPv4 주소와 IPv6 주소를 할당할 수 있음
    + 퍼블릭 IPv4와 IPv6 GUA 주소를 AWS로 가져옴
        - VPC의 리소스(EC2 인스턴스, NAT 게이트웨이, Network Load Balancer)에 할당할 수 있음

- 라우팅
    + 라우팅 테이블을 사용하여 서브넷 또는 게이트웨이의 네트워크 트래픽이 전달되는 위치를 결정함

- 게이트웨이 및 엔드포인트
    + 게이트웨이는 VPC를 다른 네트워크에 연결함
        - 예를 들어 인터넷 게이트웨이를 사용하여 VPC를 인터넷에 연결함
    + VPC 엔드포인트
        - 인터넷 게이트웨이 또는 NAT 장치를 사용하지 않고 AWS 서비스에 비공개로 연결함 

- 피어링 연결
    + 두 VPC의 리소스 간 트래픽을 라우팅한다

- 트래픽 미러링
    + 네트워크 인터페이스에서 네트워크 트래픽을 복사함
        - 심층 패킷 검사를 위해 보안 및 모니터링 어플라이언스로 전송함

- Transit Gateway
    + 중앙 허브 역할을 하는 전송 게이트웨이를 사용함
        - VPC, VPN 연결 및 AWS Direct Connect 연결 간에 트래픽을 라우팅함

- VPC 흐름 로그
    + VPC의 네트워크 인터페이스로 들어오고 나가는 IP 트래픽에 대한 정보를 캡처함

- VPN 연결
    + AWS VPN을 사용하여 온프레미스 네트워크에 VPC를 연결함 

### CIDR
CIDR(Classless Inter-Domain Routing, 사이더): 클래스 없는 도메인 간 라우팅 기법
- 기존에 네트워크 영역과 호스트 영역으로 되어있는 IP주소
- 172.16.0.0/24 , 152.2.136.0/26과 같이 표기 

### 생성
- VPC만, VPC등 (VPC등이 편리)
1. IP 주소 범위 생성
2. 가용 영역(AZ)별 서브넷 설정
3. 인터넷으로 향하는 경로(route)만들기
4. VPC로/부터의 트래픽 설정
- Private IP 대역
    + 10.0.0.0 ~ 10.255.255.255
    + 172.16.0.0 ~ 172.31.255.255
    + 192.168.0.0 ~ 192.168.255.255